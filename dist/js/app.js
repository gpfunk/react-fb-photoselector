!function e(t,o,n){function r(s,l){if(!o[s]){if(!t[s]){var c="function"==typeof require&&require;if(!l&&c)return c(s,!0);if(a)return a(s,!0);var i=new Error("Cannot find module '"+s+"'");throw i.code="MODULE_NOT_FOUND",i}var u=o[s]={exports:{}};t[s][0].call(u.exports,function(e){var o=t[s][1][e];return r(o?o:e)},u,u.exports,e,t,o,n)}return o[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t,o){(function(e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(r,a){if("object"===("undefined"==typeof o?"undefined":n(o))&&"undefined"!=typeof t)t.exports=r("undefined"!=typeof window?window.React:"undefined"!=typeof e?e.React:null);else if("function"==typeof define&&define.amd)define(["react"],r);else{var s;if("undefined"!=typeof window)s=window;else if("undefined"!=typeof e)s=e;else{if("undefined"==typeof self)return console&&console.error&&console.error("Couldn't detect environment. Please file an Issue at %s with information about your runtime environment.","https://github.com/mscharl/react-fb-photoselector/issues");s=self}s[a]=r(s.React)}}(function(e){var t,o={CONNECTION_FAILED:{code:-1,message:"could not connect to fb"},NO_ALBUMS:{code:1,message:"could not load albums from user"},NO_PHOTOS:{code:2,message:"could not load photos from album"}};return t=e.createClass({displayName:"MSFBPhotoSelector",statics:{TEXTS:{your_albums:"Your Albums",show_more:"Show more",loading:"Loadingâ€¦",connection_failed:"Failed to connect to Facebook.",could_not_load_albums:"Albums couldn't be loaded.",could_not_load_album_photos:"Data for this album could not be loaded.",could_not_select_photo:"Failed to select the photo.",close:"Close"},ERROR:o,ALBUM_PHOTOS_LIMIT:6,ALBUM_PHOTOS_ROWS_TO_ADD:3},propTypes:{closeOnEsc:e.PropTypes.bool,closeOnOutsideClick:e.PropTypes.bool,onError:e.PropTypes.func,onCancel:e.PropTypes.func.isRequired,onSelect:e.PropTypes.func.isRequired},getInitialState:function(){return{FB_user_picture_url:"",FB_albums:[],FB_accessToken:"",initializing:!0,selectedPhoto:0,selectingPhoto:!1,showErrorMessage:!1,errorMessageLink:"",errorMessage:""}},getDefaultProps:function(){return{closeOnEsc:!0,closeOnOutsideClick:!0,onError:function(){return null}}},componentDidMount:function(){var e=this;e._manageGlobalEventHandlers(e.props),e._FB_init(function(){e.setState({initializing:!1})})},componentWillUnmount:function(){this._manageGlobalEventHandlers({},!0)},componentWillReceiveProps:function(e){this._manageGlobalEventHandlers(e)},_manageGlobalEventHandlers:function(e,t){var o=this;!t&&e.closeOnEsc?document.addEventListener("keyup",o.onKeyup_document):document.removeEventListener("keyup",o.onKeyup_document),!t&&e.closeOnOutsideClick?document.addEventListener("click",o.onClick_document):document.removeEventListener("click",o.onClick_document)},_FB_init:function(e){var n=this;if("undefined"==typeof FB)throw new Error("FB-SDK was not found!");FB.getLoginStatus(function(r){"connected"!=r.status?(n.props.onError(o.CONNECTION_FAILED),n.set_errorMessage(t.TEXTS.connection_failed)):(n.setState({FB_accessToken:r.authResponse.accessToken}),n._FB_getUserAlbums(e),n._FB_getUserImage())},!0)},_FB_getUserImage:function(){var e=this;e._FB_API("/me/picture",function(t){e.setState({FB_user_picture:t.data.url})})},_FB_getUserAlbums:function(e){var n=this;n._FB_API("/me/albums",{fields:"name,id"},function(r){!r||r.error?(n.props.onError(o.NO_ALBUMS),n.set_errorMessage(t.TEXTS.could_not_load_albums)):n.setState({FB_albums:r.data.map(function(e){var e={id:e.id,name:e.name,loading:!1,limit:t.ALBUM_PHOTOS_LIMIT,photos:[]};return n._FB_getAlbumPhotos(e),e})},e)})},_FB_getAlbumPhotos:function(e){var n=this;n._FB_API("/"+e.id+"/photos",{fields:"id",limit:999999},function(r){if(!r||r.error)n.props.onError(o.NO_PHOTOS),n.set_errorMessage(t.TEXTS.could_not_load_album_photos,"https://facebook.com/"+e.id);else{var a=n.state.FB_albums.indexOf(e),s=n.state.FB_albums.slice(0);s[a].photos=r.data.map(function(e){return{id:e.id}}),n.setState({FB_albums:s})}})},_FB_getPhoto:function(e,t){var o=this;o._FB_API("/"+e+"/picture",t)},_FB_API:function(e,t,o){if("undefined"==typeof FB)throw new Error("FB-SDK was not found!");FB.api(e,t,o)},onKeyup_document:function(e){27==e.keyCode&&this.onClick_cancel()},onClick_document:function(e){e.defaultPrevented||this.onClick_cancel()},onClick_cancel:function(){this.props.onCancel()},onClick_photo:function(e){var t=this;t.setState({selectedPhoto:e.id,selectingPhoto:!0},function(){return t._FB_getPhoto(e.id,function(o){t.props.onSelect({id:e.id,url:o.data.url})})})},onClick_showMorePhotos:function(e){var o=this,n=o.state.FB_albums.slice(),r=n.indexOf(e);n[r].limit+=t.ALBUM_PHOTOS_LIMIT*t.ALBUM_PHOTOS_ROWS_TO_ADD,o.setState({FB_albums:n})},set_errorMessage:function(e,t,o){var n=this;n.setState({showErrorMessage:"undefined"==typeof link?1:2,errorMessage:e,errorMessageLink:t},function(){return setTimeout(function(){return n.setState({showErrorMessage:!1,errorMessage:"",errorMessageLink:""})},o||4e3)})},render:function(){return this.renderPart_popup()},renderPart_popup:function(){var t=this;return e.createElement("div",{className:"ms-fbphotoselector__popup"},e.createElement("div",{className:"ms-fbphotoselector"},t.renderPart_header(),e.createElement("div",{className:"ms-fbphotoselector__content"},t.renderPart_error(),t.state.initializing?t.renderPath_loading():t.renderPart_albums()),t.renderPart_footer(),t.state.selectingPhoto?e.createElement("div",{className:"ms-fbphotoselector__content__overlay"}):null))},renderPart_header:function(){var o=this;return e.createElement("div",{className:"ms-fbphotoselector__header"},o.state.FB_user_picture_url?e.createElement("img",{src:o.state.user_picture,className:"ms-fbphotoselector__header__user-image"}):null,e.createElement("i",{className:"ms-fbphotoselector__header__icon"}),t.TEXTS.your_albums)},renderPart_footer:function(){var o=this;return e.createElement("div",{className:"ms-fbphotoselector__footer"},e.createElement("a",{onClick:o.onClick_cancel},t.TEXTS.close))},renderPath_loading:function(){return e.createElement("div",{className:"ms-fbphotoselector__loader"},t.TEXTS.loading)},renderPart_albums:function(){var o=this,n=o.state.FB_albums.filter(function(e){return!!e.photos.length});return e.createElement("ul",{className:"ms-fbphotoselector__albums"},n.map(function(n){return e.createElement("li",{key:n.id,className:"ms-fbphotoselector__albums__item"},e.createElement("h3",{className:"ms-fbphotoselector__albums__item-name"},n.name),e.createElement("ul",{className:"ms-fbphotoselector__albums__photos"},n.photos.slice(0,n.limit).map(o.renderPart_photo)),n.limit<n.photos.length?e.createElement("button",{className:"ms-fbphotoselector__albums__item-more",onClick:function(){return o.onClick_showMorePhotos(n)}},t.TEXTS.show_more):null)}))},renderPart_photo:function(t){var o=this,n={backgroundImage:"url('https://graph.facebook.com/"+t.id+"/picture?type=album&access_token="+o.state.FB_accessToken+"')"},r=["ms-fbphotoselector__albums__photos-image__image",o.state.selectedPhoto==t.id&&"ms-fbphotoselector__albums__photos-image__image--selected"];return e.createElement("li",{key:t.id,className:"ms-fbphotoselector__albums__photos-image"},e.createElement("div",{className:r.join(" "),onClick:function(){return o.onClick_photo(t)},style:n}))},renderPart_error:function(){var t=this,o=["ms-fbphotoselector__error",t.state.showErrorMessage&&"ms-fbphotoselector__error--visible"];return t.state.showErrorMessage?e.createElement("div",{className:o.join(" ")},e.createElement("span",{className:"ms-fbphotoselector__error__icon"}),2!=t.state.showErrorMessage?e.createElement("span",{className:"ms-fbphotoselector__error__text"},t.state.errorMessage):e.createElement("a",{href:t.state.errorMessageLink,target:"_blank",className:"ms-fbphotoselector__error__text"},t.state.errorMessage)):null}})},"MSFBPhotoSelector")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,o){(function(o){"use strict";var n="undefined"!=typeof window?window.React:"undefined"!=typeof o?o.React:null,r=e("react-fb-photoselector");t.exports=n.createClass({displayName:"Example",statics:{},propTypes:{},getInitialState:function(){return{selectFacebookImage:!1,fbIsAvailable:!1,connectionError:!1,facebookImageUrl:""}},getDefaultProps:function(){return{}},componentWillReceiveProps:function(e){},componentDidMount:function(){function e(){"undefined"!=typeof FB&&t.setState({fbIsAvailable:!0}),t.checkForFacebookTimeout=setTimeout(e,50)}var t=this;e()},componentWillUnmount:function(){clearTimeout(this.checkForFacebookTimeout)},checkForFacebookTimeout:0,onClick_facebookConnect:function(){var e=this;FB.login(function(t){t&&t.authResponse?e.setState({connectionError:!1,selectFacebookImage:!0}):e.setState({connectionError:!0})},{scope:"user_photos"})},photoselect_onCancel:function(){this.setState({selectFacebookImage:!1})},photoselect_onSelect:function(e){this.setState({selectFacebookImage:!1,facebookImageUrl:e.url})},render:function(){var e=this;return n.createElement("div",null,e.state.connectionError?n.createElement("div",{className:"alert alert-warning",role:"alert"},n.createElement("strong",null,"Not Connected!")," You need to connect with Facebook in order to use this dialog."):null,e.state.facebookImageUrl?n.createElement("div",{className:"row"},n.createElement("div",{className:"col-sm-4 col-sm-offset-1"},n.createElement("div",{className:"form-group"},n.createElement("button",{className:"app-example__connect btn btn-block btn-primary",onClick:e.onClick_facebookConnect,disabled:!e.state.fbIsAvailable},"Select another"))),n.createElement("div",{className:"col-sm-6"},n.createElement("div",{className:"app-example__image__wrapper"},n.createElement("img",{src:e.state.facebookImageUrl,alt:"Your selected image",className:"app-example__image img-fluid"})))):n.createElement("div",{className:"row"},n.createElement("div",{className:"col-sm-6 col-sm-offset-3 col-md-4 col-md-offset-4"},n.createElement("button",{className:"app-example__connect btn btn-block btn-facebook",onClick:e.onClick_facebookConnect,disabled:!e.state.fbIsAvailable},e.state.fbIsAvailable?n.createElement("span",null,n.createElement("i",{className:"fa fa-facebook-official"})," Connect with Facebook"):n.createElement("span",null,n.createElement("i",{className:"fa fa-fw fa-spin fa-spinner"}),"Waiting for Facebook")))),e.state.selectFacebookImage?n.createElement(r,{onSelect:e.photoselect_onSelect,onCancel:e.photoselect_onCancel}):null)}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"react-fb-photoselector":1}],3:[function(e,t,o){(function(t){"use strict";var o="undefined"!=typeof window?window.React:"undefined"!=typeof t?t.React:null,n="undefined"!=typeof window?window.ReactDOM:"undefined"!=typeof t?t.ReactDOM:null,r=e("./Components/Example.jsx");n.render(o.createElement(r,null),document.getElementById("example"))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Components/Example.jsx":2}]},{},[3]);